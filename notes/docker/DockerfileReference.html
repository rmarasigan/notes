
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="263238">
  <script src="../../_static/javascripts/modernizr.js"></script>
  
  
  
    <title>Dockerfile Reference &#8212; Aide Memoire 1.0.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/material.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Docker Volumes" href="Volumes.html" />
    <link rel="prev" title="Dockerfile" href="Docker-file.html" />
  
   

  </head>
  <body dir=ltr
        data-md-color-primary=blue data-md-color-accent=light-blue>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#notes/docker/DockerfileReference" tabindex="1" class="md-skip"> Skip to content </a>
  <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../../index.html" title="Aide Memoire 1.0.0 documentation"
           class="md-header-nav__button md-logo">
          
            &nbsp;
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <span class="md-header-nav__topic">Aide Memoire üë©üèª‚Äçüíª</span>
          <span class="md-header-nav__topic"> Dockerfile Reference </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" action="../../search.html" method="get" name="search">
      <input type="text" class="md-search__input" name="q" placeholder="Search"
             autocapitalize="off" autocomplete="off" spellcheck="false"
             data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>

      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            <a href="https://github.com/rmarasigan/notes" title="Go to repository" class="md-source" data-md-source="github">

    <div class="md-source__icon">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width="28" height="28">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    Notes
  </div>
</a>
          </div>
        </div>
      
      
  
  <script src="../../_static/javascripts/version_dropdown.js"></script>
  <script>
    var json_loc = "../../"versions.json"",
        target_loc = "../../../",
        text = "Versions";
    $( document ).ready( add_version_dropdown(json_loc, target_loc, text));
  </script>
  

    </div>
  </nav>
</header>

  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
          <li class="md-tabs__item"><a href="../../index.html" class="md-tabs__link">Aide Memoire 1.0.0 documentation</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../../index.html" title="Aide Memoire 1.0.0 documentation" class="md-nav__button md-logo">
      
        <img src="../../_static/" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../../index.html"
       title="Aide Memoire 1.0.0 documentation">Aide Memoire üë©üèª‚Äçüíª</a>
  </label>
    <div class="md-nav__source">
      <a href="https://github.com/rmarasigan/notes" title="Go to repository" class="md-source" data-md-source="github">

    <div class="md-source__icon">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width="28" height="28">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    Notes
  </div>
</a>
    </div>
  
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#notes-docker-dockerfilereference--page-root" class="md-nav__link">Dockerfile Reference</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#build-image" class="md-nav__link">Build Image</a>
        </li>
        <li class="md-nav__item"><a href="#tagging-an-image" class="md-nav__link">Tagging an Image</a>
        </li>
        <li class="md-nav__item"><a href="#from" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">FROM</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#run" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">RUN</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#cmd" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">CMD</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#expose" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">EXPOSE</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#env" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">ENV</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#copy" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">COPY</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#volume" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">VOLUME</span></code></a>
        </li>
        <li class="md-nav__item"><a href="#workdir" class="md-nav__link"><code class="docutils literal notranslate"><span class="pre">WORKDIR</span></code></a>
        </li></ul>
            </nav>
        </li>
    
<li class="md-nav__item"><a class="md-nav__extra_link" href="../../_sources/notes/docker/DockerfileReference.md.txt">Show Source</a> </li>

<li id="searchbox" class="md-nav__item"></li>

  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  <section id="dockerfile-reference">
<h1 id="notes-docker-dockerfilereference--page-root"><a class="reference external" href="#notes-docker-dockerfilereference--page-root">Dockerfile Reference</a><a class="headerlink" href="#notes-docker-dockerfilereference--page-root" title="Permalink to this headline">¬∂</a></h1>
<p><strong>Dockerfile</strong></p>
<div class="highlight-Dockerfile notranslate"><div class="highlight"><pre><span></span><span class="k">FROM</span><span class="w"> </span><span class="s">golang:1.17</span>

<span class="k">RUN</span><span class="w"> </span>apt update
<span class="k">RUN</span><span class="w"> </span>apt install -y rsyslog

<span class="k">WORKDIR</span><span class="w"> </span><span class="s">/go/src/application</span>
<span class="k">COPY</span><span class="w"> </span>. .

<span class="k">RUN</span><span class="w"> </span>go get -d -v ./...
<span class="k">RUN</span><span class="w"> </span>go install -v ./...
<span class="k">RUN</span><span class="w"> </span>go build

<span class="k">RUN</span><span class="w"> </span>service rsyslog start

<span class="k">CMD</span><span class="w"> </span><span class="p">[</span><span class="s2">"application"</span><span class="p">]</span>
</pre></div>
</div>
<br/>
<section id="build-image">
<h2 id="build-image">Build Image<a class="headerlink" href="#build-image" title="Permalink to this headline">¬∂</a></h2>
<div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>dev@dev:~$ docker build .
Sending build context to Docker daemon <span class="m">2</span>.04kB
</pre></div>
</div>
<p>The build is run by the Docker daemon, not by the CLI. The first thing a build process does is send the entire context (recursively) to the daemon. Traditionally, the <strong>Dockerfile</strong> is called <strong>Dockerfile</strong> and located in the root of the context. You use the <code class="docutils literal notranslate"><span class="pre">-f</span></code> flag with <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">build</span></code> to point to a <strong>Dockerfile</strong> anywhere in your file system.</p>
<div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>dev@dev:~$ docker build -f /path/to/a/Dockerfile .
</pre></div>
</div>
<br/>
</section>
<section id="tagging-an-image">
<h2 id="tagging-an-image">Tagging an Image<a class="headerlink" href="#tagging-an-image" title="Permalink to this headline">¬∂</a></h2>
<div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>dev@dev:~$ docker build -t docker_id/image_name:latest .
</pre></div>
</div>
<br/>
</section>
<section id="from">
<h2 id="from"><code class="docutils literal notranslate"><span class="pre">FROM</span></code><a class="headerlink" href="#from" title="Permalink to this headline">¬∂</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">FROM</span></code> instruction initializes a new build stage and sets the Base Image for subsequent instructions.</p>
<div class="highlight-Dockerfile notranslate"><div class="highlight"><pre><span></span><span class="k">FROM</span><span class="w"> </span><span class="s">&lt;image&gt;:&lt;tag&gt;</span>
<span class="k">FROM</span><span class="w"> </span><span class="s">golang:1.17</span>

<span class="k">FROM</span><span class="w"> </span><span class="s">[--platform=&lt;platform&gt;]</span><span class="w"> </span>&lt;image&gt; <span class="o">[</span>AS &lt;name&gt;<span class="o">]</span>
<span class="k">FROM</span><span class="w"> </span><span class="s">--platform=$BUILDPLATFORM</span><span class="w"> </span>alpine AS build

<span class="k">FROM</span><span class="w"> </span><span class="s">[--platform=&lt;platform&gt;]</span><span class="w"> </span>&lt;image&gt;<span class="o">[</span>:&lt;tag&gt;<span class="o">]</span> <span class="o">[</span>AS &lt;name&gt;<span class="o">]</span>
<span class="k">FROM</span><span class="w"> </span><span class="s">--platform=$BUILDPLATFORM</span><span class="w"> </span>golang:alpine AS build

<span class="k">FROM</span><span class="w"> </span><span class="s">[--platform=&lt;platform&gt;]</span><span class="w"> </span>&lt;image&gt;<span class="o">[</span>@&lt;digest&gt;<span class="o">]</span> <span class="o">[</span>AS &lt;name&gt;<span class="o">]</span>
<span class="k">FROM</span><span class="w"> </span><span class="s">--platform=$BUILDPLATFORM</span><span class="w"> </span>ubuntu@sha256:82becede498899ec668628e7cb0ad87b6e1c371cb8a1e597d83a47fac21d6af3 AS build
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">tag</span></code> or <code class="docutils literal notranslate"><span class="pre">digest</span></code> values are optional. If you omit either of them, the builder assumes a latest tag by default. The builder returns an error if it cannot find the tag value. The optional <code class="docutils literal notranslate"><span class="pre">--platform</span></code> flag can be used to specify the platform of the image in case <code class="docutils literal notranslate"><span class="pre">FROM</span></code> references a multi-platform image. For example, linux/amd64, linux/arm64, or windows/amd64. By default, the target platform of the build request is used.</p>
<br/>
</section>
<section id="run">
<h2 id="run"><code class="docutils literal notranslate"><span class="pre">RUN</span></code><a class="headerlink" href="#run" title="Permalink to this headline">¬∂</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">RUN</span></code> instruction will execute any commands in a new layer on top of the current image and commit the results. The resulting committed image will be used for the next step in the <strong>Dockerfile</strong>.</p>
<div class="highlight-Dockerfile notranslate"><div class="highlight"><pre><span></span><span class="c"># shell form, the command is run in a shell,</span>
<span class="c"># which by default is /bin/sh -c on Linux</span>
<span class="c"># or cmd /S /C on Windows</span>
<span class="k">RUN</span><span class="w"> </span>&lt;command&gt;

<span class="c"># exec form</span>
<span class="k">RUN</span><span class="w"> </span><span class="o">[</span><span class="s2">"executable"</span>, <span class="s2">"param1"</span>, <span class="s2">"param2"</span><span class="o">]</span>
</pre></div>
</div>
<p>The <em>exec</em> form makes it possible to avoid shell string munging, and to <code class="docutils literal notranslate"><span class="pre">RUN</span></code> commands using a base image that does not contain the specified shell executable. The default shell for the <em>shell</em> form can be changed using the <code class="docutils literal notranslate"><span class="pre">SHELL</span></code> command.</p>
<p><strong>Example</strong></p>
<div class="highlight-Dockerfile notranslate"><div class="highlight"><pre><span></span><span class="c"># shell form</span>
<span class="k">RUN</span><span class="w"> </span>/bin/bash -c <span class="s1">'source $HOME/.bashrc; echo $HOME'</span>

<span class="c"># exec form</span>
<span class="k">RUN</span><span class="w"> </span><span class="o">[</span><span class="s2">"/bin/bash"</span>, <span class="s2">"-c"</span>, <span class="s2">"echo hello"</span><span class="o">]</span>
</pre></div>
</div>
<br/>
</section>
<section id="cmd">
<h2 id="cmd"><code class="docutils literal notranslate"><span class="pre">CMD</span></code><a class="headerlink" href="#cmd" title="Permalink to this headline">¬∂</a></h2>
<p>There can only be one <code class="docutils literal notranslate"><span class="pre">CMD</span></code> instruction in a <strong>Dockerfile</strong>. If you list more than one <code class="docutils literal notranslate"><span class="pre">CMD</span></code> then only the last <code class="docutils literal notranslate"><span class="pre">CMD</span></code> will take effect. The <strong>main purpose of a CMD</strong> is to provide defaults for an executing container. These defaults can include an executable, or they can omit the executable, in which case you must specify an <code class="docutils literal notranslate"><span class="pre">ENTRYPOINT</span></code> instruction as well.</p>
<div class="highlight-Dockerfile notranslate"><div class="highlight"><pre><span></span><span class="c"># exec form, this is the preferred form</span>
<span class="k">CMD</span><span class="w"> </span><span class="p">[</span><span class="s2">"executable"</span><span class="p">,</span><span class="s2">"param1"</span><span class="p">,</span><span class="s2">"param2"</span><span class="p">]</span>

<span class="c"># as default parameters to ENTRYPOINT</span>
<span class="k">CMD</span><span class="w"> </span><span class="p">[</span><span class="s2">"param1"</span><span class="p">,</span><span class="s2">"param2"</span><span class="p">]</span>

<span class="c"># shell form</span>
<span class="k">CMD</span><span class="w"> </span><span class="nb">command</span> param1 param2
</pre></div>
</div>
<p>If you use the <em>shell form</em> of the <code class="docutils literal notranslate"><span class="pre">CMD</span></code>, then the <code class="docutils literal notranslate"><span class="pre">&lt;command&gt;</span></code> will execute in <code class="docutils literal notranslate"><span class="pre">/bin/sh</span> <span class="pre">-c</span></code>:</p>
<div class="highlight-Dockerfile notranslate"><div class="highlight"><pre><span></span><span class="k">FROM</span><span class="w"> </span><span class="s">ubuntu</span>
<span class="k">CMD</span><span class="w"> </span><span class="nb">echo</span> <span class="s2">"This is a test."</span> <span class="p">|</span> wc -
</pre></div>
</div>
<p>If you want to run your <code class="docutils literal notranslate"><span class="pre">&lt;command&gt;</span></code> without a shell then you must express the command as a JSON array and give the full path to the executable. This array form is the preferred format of <code class="docutils literal notranslate"><span class="pre">CMD</span></code>. Any additional parameters must be individually expressed as strings in the array:</p>
<div class="highlight-Dockerfile notranslate"><div class="highlight"><pre><span></span><span class="k">FROM</span><span class="w"> </span><span class="s">ubuntu</span>
<span class="k">CMD</span><span class="w"> </span><span class="p">[</span><span class="s2">"/usr/bin/wc"</span><span class="p">,</span><span class="w"> </span><span class="s2">"--help"</span><span class="p">]</span>
</pre></div>
</div>
<p>If you would like your container to run the same executable every time, then you should consider using ENTRYPOINT in combination with <code class="docutils literal notranslate"><span class="pre">CMD</span></code>.</p>
<br/>
</section>
<section id="expose">
<h2 id="expose"><code class="docutils literal notranslate"><span class="pre">EXPOSE</span></code><a class="headerlink" href="#expose" title="Permalink to this headline">¬∂</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">EXPOSE</span></code> instruction informs Docker that the container listens on the specified network ports at runtime. You can specify whether the port listens on TCP or UDP, and the default is TCP if the protocol is not specified. The <code class="docutils literal notranslate"><span class="pre">EXPOSE</span></code> instruction does not actually publish the port. It functions as a type of documentation between the person who builds the image and the person who runs the container, about which ports are intended to be published. To actually publish the port when running the container, use the <code class="docutils literal notranslate"><span class="pre">-p</span></code> flag on <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">run</span></code> to publish and map one or more ports, or the <code class="docutils literal notranslate"><span class="pre">-P</span></code> flag to publish all exposed ports and map them to high-order ports.</p>
<div class="highlight-Dockerfile notranslate"><div class="highlight"><pre><span></span><span class="k">EXPOSE</span><span class="w"> </span><span class="s">&lt;port&gt; [&lt;port&gt;/&lt;protocol&gt;...]</span>

<span class="c"># By default, EXPOSE assumes TCP.</span>
<span class="c"># You can also specify UDP</span>
<span class="k">EXPOSE</span><span class="w"> </span><span class="s">80/udp</span>

<span class="c"># To expose on both TCP and UDP</span>
<span class="k">EXPOSE</span><span class="w"> </span><span class="s">80/tcp</span>
<span class="k">EXPOSE</span><span class="w"> </span><span class="s">80/udp</span>
</pre></div>
</div>
<p>Regardless of the <code class="docutils literal notranslate"><span class="pre">EXPOSE</span></code> settings, you can override them at runtime by using the <code class="docutils literal notranslate"><span class="pre">-p</span></code> flag.</p>
<div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>dev@dev:~$ docker run -p <span class="m">80</span>:80/tcp -p <span class="m">80</span>:80/udp ...
</pre></div>
</div>
<br/>
</section>
<section id="env">
<h2 id="env"><code class="docutils literal notranslate"><span class="pre">ENV</span></code><a class="headerlink" href="#env" title="Permalink to this headline">¬∂</a></h2>
<div class="highlight-Dockerfile notranslate"><div class="highlight"><pre><span></span><span class="k">ENV</span><span class="w"> </span>&lt;key&gt;<span class="o">=</span>&lt;value&gt; ...

<span class="k">ENV</span><span class="w"> </span><span class="nv">GO111MODULE</span><span class="o">=</span>on
<span class="k">ENV</span><span class="w"> </span><span class="nv">GOOS</span><span class="o">=</span><span class="s2">"linux"</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">ENV</span></code> instruction sets the environment variable <code class="docutils literal notranslate"><span class="pre">&lt;key&gt;</span></code> to the value <code class="docutils literal notranslate"><span class="pre">&lt;value&gt;</span></code>. This value will be in the environment for all subsequent instructions in the build stage and can be replaced inline in many as well. The environment variables set using <code class="docutils literal notranslate"><span class="pre">ENV</span></code> will persist when a container is run from the resulting image. You can view the values using <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">inspect</span></code>, and change them using <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">run</span> <span class="pre">--env</span> <span class="pre">&lt;key&gt;=&lt;value&gt;</span></code>.</p>
<br/>
</section>
<section id="copy">
<h2 id="copy"><code class="docutils literal notranslate"><span class="pre">COPY</span></code><a class="headerlink" href="#copy" title="Permalink to this headline">¬∂</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">COPY</span></code> instruction copies new files or directories from <code class="docutils literal notranslate"><span class="pre">&lt;src&gt;</span></code> and adds them to the filesystem of the container at the path <code class="docutils literal notranslate"><span class="pre">&lt;dest&gt;</span></code>. Multiple<code class="docutils literal notranslate"> <span class="pre">&lt;src&gt;</span></code> resources may be specified but the paths of files and directories will be interpreted as relative to the source of the context of the build. The <code class="docutils literal notranslate"><span class="pre">--chown</span></code> feature is only supported on Dockerfiles used to build Linux containers, and will not work on Windows containers. The <code class="docutils literal notranslate"><span class="pre">&lt;dest&gt;</span></code> is an absolute path, or a path relative to <code class="docutils literal notranslate"><span class="pre">WORKDIR</span></code>, into which the source will be copied inside the destination container.</p>
<p>Optionally <code class="docutils literal notranslate"><span class="pre">COPY</span></code> accepts a flag <code class="docutils literal notranslate"><span class="pre">--from=&lt;name&gt;</span></code> that can be used to set the source location to a previous build stage (created with <code class="docutils literal notranslate"><span class="pre">FROM</span> <span class="pre">..</span> <span class="pre">AS</span> <span class="pre">&lt;name&gt;</span></code>) that will be used instead of a build context sent by the user. In case a build stage with a specified name can‚Äôt be found an image with the same name is attempted to be used instead.</p>
<div class="highlight-Dockerfile notranslate"><div class="highlight"><pre><span></span><span class="k">COPY</span><span class="w"> </span><span class="o">[</span>--chown<span class="o">=</span>&lt;user&gt;:&lt;group&gt;<span class="o">]</span> &lt;src&gt;... &lt;dest&gt;
<span class="k">COPY</span><span class="w"> </span>--chown<span class="o">=</span>username:groupname files* /somedir/

<span class="k">COPY</span><span class="w"> </span><span class="o">[</span>--chown<span class="o">=</span>&lt;user&gt;:&lt;group&gt;<span class="o">]</span> <span class="o">[</span><span class="s2">"&lt;src&gt;"</span>,... <span class="s2">"&lt;dest&gt;"</span><span class="o">]</span>

<span class="c"># uses a relative path, and adds file.txt‚Äù</span>
<span class="c"># to &lt;WORKDIR&gt;/relativeDir/</span>
<span class="k">COPY</span><span class="w"> </span>file.txt relativeDir/

<span class="c"># uses an absolute path, and adds file.txt‚Äù</span>
<span class="c"># to /absoluteDir/</span>
<span class="k">COPY</span><span class="w"> </span>file.txt /absoluteDir/
</pre></div>
</div>
<br/>
</section>
<section id="volume">
<h2 id="volume"><code class="docutils literal notranslate"><span class="pre">VOLUME</span></code><a class="headerlink" href="#volume" title="Permalink to this headline">¬∂</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">VOLUME</span></code> instruction creates a mount point with the specified name and marks it as holding externally mounted volumes from native host or other containers. The value can be a JSON array,<code class="docutils literal notranslate"> <span class="pre">VOLUME</span> <span class="pre">["/var/log/"]</span></code>, or a plain string with multiple arguments, such as <code class="docutils literal notranslate"><span class="pre">VOLUME</span> <span class="pre">/var/log</span> <span class="pre">or</span> <span class="pre">VOLUME</span> <span class="pre">/var/log</span> <span class="pre">/var/db</span></code>.</p>
<div class="highlight-Dockerfile notranslate"><div class="highlight"><pre><span></span><span class="k">VOLUME</span><span class="w"> </span><span class="p">[</span><span class="s2">"/data"</span><span class="p">]</span>
</pre></div>
</div>
<br/>
</section>
<section id="workdir">
<h2 id="workdir"><code class="docutils literal notranslate"><span class="pre">WORKDIR</span></code><a class="headerlink" href="#workdir" title="Permalink to this headline">¬∂</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">WORKDIR</span></code> instruction sets the working directory for any <code class="docutils literal notranslate"><span class="pre">RUN</span></code>, <code class="docutils literal notranslate"><span class="pre">CMD</span></code>, <code class="docutils literal notranslate"><span class="pre">ENTRYPOINT</span></code>, <code class="docutils literal notranslate"><span class="pre">COPY</span></code> and <code class="docutils literal notranslate"><span class="pre">ADD</span></code> instructions that follow it in the <strong>Dockerfile</strong>. If the <code class="docutils literal notranslate"><span class="pre">WORKDIR</span></code> doesn‚Äôt exist, it will be created even if it‚Äôs not used in any subsequent <strong>Dockerfile</strong> instruction. The <code class="docutils literal notranslate"><span class="pre">WORKDIR</span></code> instruction can be used multiple times in a <strong>Dockerfile</strong>.</p>
<div class="highlight-Dockerfile notranslate"><div class="highlight"><pre><span></span><span class="k">WORKDIR</span><span class="w"> </span><span class="s">/path/to/workdir</span>

<span class="c"># The WORKDIR instruction can resolve environment</span>
<span class="c"># variables previously set using ENV</span>
<span class="k">ENV</span><span class="w"> </span><span class="nv">DIRPATH</span><span class="o">=</span>/path
<span class="k">WORKDIR</span><span class="w"> </span><span class="s">$DIRPATH</span>
</pre></div>
</div>
</section>
</section>


          </article>
        </div>
      </div>
    </main>
  </div>
  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="Docker-file.html" title="Dockerfile"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> Previous </span> Dockerfile </span>
              </div>
            </a>
          
          
            <a href="Volumes.html" title="Docker Volumes"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> Next </span> Docker Volumes </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
          <div class="md-footer-copyright__highlight">
              &#169; Copyright 2022, rmarasigan.
              
          </div>
            Created using
            <a href="http://www.sphinx-doc.org/">Sphinx</a> 4.3.2.
             and
            <a href="https://github.com/bashtage/sphinx-material/">Material for
              Sphinx</a>
        </div>
      </div>
    </div>
  </footer>
  <script src="../../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
  </body>
</html>